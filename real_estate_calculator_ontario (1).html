
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Real Estate Legal Fee & Disbursement Calculator (Ontario)</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#f6f7fb; --card:#ffffff; --text:#1f2937; --muted:#6b7280; --brand:#2563eb; --ok:#16a34a; --bad:#dc2626; --border:#e5e7eb;
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;background:var(--bg);color:var(--text)}
    .container{max-width:1080px;margin:24px auto;padding:0 16px;}
    h1{font-size:22px;margin:0 0 16px}
    .grid{display:grid;grid-template-columns:360px 1fr;gap:16px}
    @media (max-width: 900px){.grid{grid-template-columns:1fr;}}
    .card{background:var(--card);border:1px solid var(--border);border-radius:10px;box-shadow:0 1px 0 rgba(0,0,0,.04)}
    .card h2{font-size:18px;margin:0;padding:14px 16px;border-bottom:1px solid var(--border)}
    .card .content{padding:14px 16px}

    /* left form */
    .section-title{font-weight:700;margin:8px 0 10px}
    label{display:block;font-weight:600;font-size:12px;color:var(--muted);margin:10px 0 6px}
    input[type=text], input[type=number], input[type=date]{width:100%;padding:10px 12px;border:1px solid var(--border);border-radius:8px;font-size:14px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
    .toggle{display:flex;align-items:center;gap:10px;margin:10px 0}
    .switch{position:relative;display:inline-block;width:46px;height:26px}
    .switch input{display:none}
    .slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#cbd5e1;transition:.2s;border-radius:999px}
    .slider:before{position:absolute;content:"";height:22px;width:22px;left:2px;top:2px;background:white;transition:.2s;border-radius:50%}
    .switch input:checked + .slider{background:var(--brand)}
    .switch input:checked + .slider:before{transform:translateX(20px)}
    .btn{display:inline-flex;align-items:center;justify-content:center;background:#e5e7eb;border:1px solid var(--border);padding:10px 14px;border-radius:8px;font-weight:600;cursor:pointer}
    .btn.primary{background:var(--brand);border-color:var(--brand);color:white}

    /* tables */
    table{width:100%;border-collapse:separate;border-spacing:0;border:1px solid var(--border);border-radius:8px;overflow:hidden}
    th, td{padding:10px 12px;border-bottom:1px solid var(--border);font-size:14px}
    tr:last-child td{border-bottom:none}
    th{background:#f9fafb;text-align:left}
    td.amount{text-align:right;white-space:nowrap;width:140px}
    .sub{color:var(--muted);font-size:12px}
    .muted{color:var(--muted)}
    .pos{color:var(--ok);font-weight:700}
    .neg{color:var(--bad);font-weight:700;text-decoration:line-through}
    .total{font-weight:800}
    .note{font-size:12px;color:var(--muted);margin-top:8px}
    .pill{font-size:11px;padding:2px 6px;border-radius:6px;border:1px solid var(--border);color:var(--muted)}
  </style>
</head>
<body>
  <div class="container">
    <h1>Purchase Quote – Legal Fees & Disbursements (Ontario)</h1>
    <div class="grid">
      <!-- LEFT: Inputs -->
      <div class="card">
        <h2>Customize Your Buying Quote</h2>
        <div class="content">
          <div class="section-title">1. About Your Deal</div>
          <label>Address</label>
          <input id="address" type="text" placeholder="123 Main St" />

          <div class="row">
            <div>
              <label>Purchase Price $</label>
              <input id="price" type="number" inputmode="numeric" min="0" step="1000" value="650000" />
            </div>
            <div>
              <label>Closing Date</label>
              <input id="closing" type="date" />
            </div>
          </div>

          <div class="section-title">2. About You</div>
          <div class="toggle">
            <label class="switch">
              <input id="isFthb" type="checkbox" checked />
              <span class="slider"></span>
            </label>
            <div>
              <div>Are you a First‑Time Home Buyer?</div>
              <div class="sub">Ontario LTT rebate up to $4,000 (must meet eligibility).</div>
            </div>
          </div>
          <div class="toggle">
            <label class="switch">
              <input id="isCitizen" type="checkbox" checked />
              <span class="slider"></span>
            </label>
            <div>
              <div>Are you a Canadian Citizen or Permanent Resident?</div>
              <div class="sub">Required for the FTHB LTT refund.</div>
            </div>
          </div>
          <div class="toggle">
            <label class="switch">
              <input id="isToronto" type="checkbox" />
              <span class="slider"></span>
            </label>
            <div>
              <div>Property in City of Toronto?</div>
              <div class="sub">Adds municipal LTT (set to off for Ottawa and elsewhere).</div>
            </div>
          </div>

          <button class="btn primary" id="recalc">Continue / Recalculate</button>
          <div class="note">All amounts in CAD. Values are sample estimates—update fee presets in the code for your firm.</div>
        </div>
      </div>

      <!-- RIGHT: Results -->
      <div class="right">
        <div class="card" style="margin-bottom:16px;">
          <h2>Your Legal Fees <span class="pill">Paid to Law Firm</span></h2>
          <div class="content">
            <table>
              <tbody>
                <tr>
                  <td>Legal Fee for Purchase Transaction</td>
                  <td class="amount" id="legalFeeDisp">$—</td>
                </tr>
                <tr>
                  <td>Limited Time Promo Discount</td>
                  <td class="amount pos" id="promoDisp">$—</td>
                </tr>
                <tr>
                  <td>Software/Platform Fee</td>
                  <td class="amount" id="softwareDisp">Included</td>
                </tr>
                <tr>
                  <td>Law Office Disbursements (courier, copies, etc.)</td>
                  <td class="amount" id="officeDisp">Included</td>
                </tr>
                <tr>
                  <td class="total">Total Legal Fees (before HST)</td>
                  <td class="amount total" id="legalTotalDisp">$—</td>
                </tr>
              </tbody>
            </table>
            <div class="note">HST (13%) applies to legal fees and some third‑party services.</div>
          </div>
        </div>

        <div class="card">
          <h2>Your Disbursements <span class="pill">Paid to Government & 3rd Parties</span></h2>
          <div class="content">
            <table>
              <tbody>
                <tr>
                  <td>TERANET® Search Fees <span class="muted">(estimate)</span></td>
                  <td class="amount" id="teranetDisp">$—</td>
                </tr>
                <tr>
                  <td>Title Insurance Premium <span class="muted">(estimate)</span></td>
                  <td class="amount" id="titleDisp">$—</td>
                </tr>
                <tr>
                  <td>TREEFORT® / Remote ID Verification</td>
                  <td class="amount" id="idvDisp">$—</td>
                </tr>
                <tr>
                  <td>Ontario Government Registration Fees</td>
                  <td class="amount" id="regDisp">$—</td>
                </tr>
                <tr>
                  <td>Ontario Land Transfer Tax</td>
                  <td class="amount" id="lttDisp">$—</td>
                </tr>
                <tr id="mlttRow" style="display:none;">
                  <td>Toronto Municipal Land Transfer Tax</td>
                  <td class="amount" id="mlttDisp">$—</td>
                </tr>
                <tr>
                  <td>Sales Tax (HST on taxable items)</td>
                  <td class="amount" id="hstDisp">$—</td>
                </tr>
                <tr>
                  <td class="total">Total Disbursements</td>
                  <td class="amount total" id="disbTotalDisp">$—</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // ------- Editable Firm Presets -------
    const PRESETS = {
      legalFee: 1299,           // Base legal fee before promo
      promoDiscount: 200,       // Shown as a positive deduction
      softwareFeeIncluded: 0,   // Set >0 to charge separately
      officeDisbIncluded: 0,    // Set >0 to charge separately

      teranetEstimate: 288,
      titleInsuranceEstimate: 460,
      idvFee: 25,
      registrationFees: 85,

      HST: 0.13
    };

    // ------- Ontario LTT -------
    // As of Jan 2026: 0.5% up to 55k; 1% on 55k–250k; 1.5% on 250k–400k; 2% on 400k–2M; 2.5% over 2M for one/two single residences
    function ontarioLTT(price){
      let tax = 0;
      const bands = [
        {limit:55000, rate:0.005},
        {limit:250000, rate:0.01},
        {limit:400000, rate:0.015},
        {limit:2000000, rate:0.02},
        {limit:Infinity, rate:0.025}
      ];
      let prev = 0;
      for(const b of bands){
        const amt = Math.max(0, Math.min(price, b.limit) - prev);
        if(amt<=0) break;
        tax += amt * b.rate;
        prev = b.limit;
      }
      return tax;
    }

    // Toronto MLTT mirrors provincial structure for most residential purchases
    function torontoMLTT(price){
      // Simplified mirror of provincial rates; adjust if your municipality changes
      return ontarioLTT(price);
    }

    // First-Time Home Buyer rebate (Ontario) – up to $4,000 against Ontario LTT
    function fthbRebateOntario(price, isFthb, isCitizen){
      if(!isFthb || !isCitizen) return 0;
      // Max $4,000; equivalent to full LTT on first $368,000 (approx)
      return Math.min(4000, ontarioLTT(price));
    }

    function fmt(n){
      return n.toLocaleString(undefined,{style:'currency',currency:'CAD',maximumFractionDigits:0});
    }

    function recalc(){
      const price = Number(document.getElementById('price').value || 0);
      const isFthb = document.getElementById('isFthb').checked;
      const isCitizen = document.getElementById('isCitizen').checked;
      const isToronto = document.getElementById('isToronto').checked;

      // Legal fees
      const legalBase = PRESETS.legalFee;
      const promo = PRESETS.promoDiscount; // displayed positive, subtract from total
      const software = PRESETS.softwareFeeIncluded;
      const office = PRESETS.officeDisbIncluded;
      const legalSubtotal = Math.max(0, legalBase - promo + software + office);

      // Government & 3rd party
      const teranet = PRESETS.teranetEstimate;
      const titleIns = PRESETS.titleInsuranceEstimate;
      const idv = PRESETS.idvFee;
      const reg = PRESETS.registrationFees;

      let ltt = ontarioLTT(price);
      const rebate = fthbRebateOntario(price, isFthb, isCitizen);
      ltt = Math.max(0, ltt - rebate);

      let mltt = isToronto ? torontoMLTT(price) : 0;
      document.getElementById('mlttRow').style.display = isToronto ? '' : 'none';

      // HST applies to legalSubtotal and to some third-party service fees (e.g., idv, software)
      const hstBase = legalSubtotal + (software>0?software:0) + idv; // simplify: HST on legalSubtotal already includes software/office if charged
      const hst = PRESETS.HST * hstBase;

      const disbTotal = teranet + titleIns + idv + reg + ltt + mltt + hst;

      // Write to UI
      document.getElementById('legalFeeDisp').textContent = fmt(legalBase);
      document.getElementById('promoDisp').textContent = '-' + fmt(promo);
      document.getElementById('softwareDisp').textContent = software>0? fmt(software): 'Included';
      document.getElementById('officeDisp').textContent = office>0? fmt(office): 'Included';
      document.getElementById('legalTotalDisp').textContent = fmt(legalSubtotal);

      document.getElementById('teranetDisp').textContent = fmt(teranet);
      document.getElementById('titleDisp').textContent = fmt(titleIns);
      document.getElementById('idvDisp').textContent = fmt(idv);
      document.getElementById('regDisp').textContent = fmt(reg);
      document.getElementById('lttDisp').textContent = fmt(ltt);
      document.getElementById('mlttDisp').textContent = fmt(mltt);
      document.getElementById('hstDisp').textContent = fmt(hst);
      document.getElementById('disbTotalDisp').textContent = fmt(disbTotal);
    }

    // Set default closing date to 14 days from today
    (function init(){
      const d = new Date();
      d.setDate(d.getDate()+14);
      const iso = d.toISOString().slice(0,10);
      document.getElementById('closing').value = iso;
      document.getElementById('recalc').addEventListener('click', recalc);
      ['price','isFthb','isCitizen','isToronto'].forEach(id=>{
        document.getElementById(id).addEventListener('input', recalc);
        document.getElementById(id).addEventListener('change', recalc);
      });
      recalc();
    })();
  </script>
</body>
</html>
